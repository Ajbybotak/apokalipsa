<!DOCTYPE html>
<html lang="pl">
<head>
  <link rel="icon" type="image/png" href="zombieface.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apokalipsa Zombie!</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      background-color: #f4f4f4;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
      transform: translateY(-60px);
      transform: translateX(35px);
      font-size: 40px;
      outline: 2px solid red;
    }
    .top-buttons {
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 10px;
      left: 15px;
      gap: 5px;
      outline: 2px solid red;
      z-index: 10;
    }

    .zombie {
      position: absolute;
      z-index: 4;
      bottom: -45px;
      right: -290px;
      width: 216px;
      height: 420px;
      animation: bottom 0.05s ease, right 0.05s ease;
      will-change: bottom, right;
      background-size: cover;
      background-position: center;
      outline: 2px solid red;
      overflow: visible;
    }

    .zombie.show {
      /*transform: translateX(250px);*/
      right: -290px;
      animation: zombieShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes zombieShow {
      to {
        /*transform: translateX(0);*/
        right: -40px;
      }
    }

    .zombie.hide {
      /*transform: translateX(0px);*/
      right: -40px;
      animation: zombieHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes zombieHide {
      to {
        /*transform: translateX(250px);*/
        right: -290px;
      }
    }

    .zombie-button-first {
      color: white;
      align-items: center;
      display: flex;
      text-align: center;
      justify-content: center;
      font-size: 25px;
      font-weight: bold;
      position: absolute;
      width: 230px;
      height: 100px;
      background-color: #444;
      border: 5px solid black;
      cursor: pointer;
      border-radius: 15px;
      border-width: 5px;
      left: 5px;
      bottom: 245px;
      z-index: 4;
    }

    .zombie-button-first.show {
      transform: translateX(-350px);
      animation: buttonsShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes buttonsShow {
      to {
        transform: translateX(0px);
      }
    }

    .zombie-button-first.hide {
      transform: translateX(0px);
      animation: buttonsHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes buttonsHide {
      to {
        transform: translateX(-350px);
      }
    }

    .zombie-button-second {
      color: white;
      align-items: center;
      display: flex;
      text-align: center;
      justify-content: center;
      font-size: 25px;
      font-weight: bold;
      position: absolute;
      width: 230px;
      height: 100px;
      background-color: #444;
      border: 5px solid black;
      cursor: pointer;
      border-radius: 15px;
      border-width: 5px;
      left: 5px;
      bottom: 125px;
      z-index: 4;
    }

    .zombie-button-second.show {
      transform: translateX(-350px);
      animation: buttonsShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
      animation-delay: 0.3s;
    }

    .zombie-button-second.hide {
      transform: translateX(0px);
      animation: buttonsHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
      animation-delay: 0.3s;
    }

    .zombie-button-third {
      color: white;
      align-items: center;
      display: flex;
      text-align: center;
      justify-content: center;
      font-size: 25px;
      font-weight: bold;
      position: absolute;
      width: 230px;
      height: 100px;
      background-color: #444;
      border: 5px solid black;
      cursor: pointer;
      border-radius: 15px;
      border-width: 5px;
      left: 5px;
      bottom: 5px;
      z-index: 4;
    }

    .zombie-button-third.show {
      transform: translateX(-350px);
      animation: buttonsShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
      animation-delay: 0.6s;
    }

    .zombie-button-third.hide {
      transform: translateX(0px);
      animation: buttonsHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
      animation-delay: 0.6s;
    }

    .buttonEvent {
      color: white;
      align-items: center;
      display: flex;
      text-align: center;
      justify-content: center;
      font-size: 25px;
      font-weight: bold;
      position: absolute;
      width: 230px;
      height: 200px;
      background-color: #444;
      border: 5px solid black;
      cursor: pointer;
      border-radius: 15px;
      border-width: 5px;
      left: 5px;
      bottom: -220px;
    }

    .buttonEvent.show {
      transform: translateY(0px);
      animation: buttonEventShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
      animation-delay: 2.1s;
    }

    @keyframes buttonEventShow {
      to {
        transform: translateY(-295px);
      }
    }

    .buttonEvent.hide {
      transform: translateY(-295px);
      animation: buttonEventHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes buttonEventHide {
      to {
        transform: translateY(0px);
      }
    }

    .icon-slide-right {
      opacity: 1;
      transform: translateX(-100px);
      animation: slideRight 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes slideRight {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .icon-slide-down {
      opacity: 1;
      transform: translateY(-200px) translateX(35px);
      animation: slideDown 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes slideDown {
      to {
        opacity: 1;
        transform: translateY(-40px) translateX(35px);
      }
    }

    .icon-slide-down2 {
      opacity: 1;
      transform: translateY(-40px) translateX(35px);
      animation: slideDown2 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes slideDown2 {
      to {
        opacity: 1;
        transform: translateY(-40px) translateX(235px);
      }
    }

    .icon-slide-left {
      opacity: 1;
      transform: translateY(-50px) translateX(500px);
      animation: slideLeft 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes slideLeft {
      to {
        opacity: 1;
        transform: translateY(-50px) translateX(0);
      }
    }

    .icon-slide-left2 {
      opacity: 1;
      transform: translateY(-50px) translateX(0px);
      animation: slideLeft2 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes slideLeft2 {
      to {
        opacity: 1;
        transform: translateY(-50px) translateX(500px);
      }
    }

    .icon-slide-left-smierc {
      opacity: 1;
      transform: translateY(-65px) translateX(300px);
      animation: slideLeftSmierc 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes slideLeftSmierc {
      to {
        opacity: 1;
        transform: translateY(-65px) translateX(0);
      }
    }

    .icon-slide-right-resetuj {
      opacity: 1;
      transform: translateY(-65px) translateX(-300px);
      animation: slideRightResetuj 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes slideRightResetuj {
      to {
        opacity: 1;
        transform: translateY(-65px) translateX(0);
      }
    }

    .top-buttons button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 36px;
      position: relative;
      outline: 2px solid blue;
      z-index: 12;
    }
    .top-buttons .dice-icon {
      font-size: 60px;
      transform: translateY(-20px);
      position: relative;
      outline: 2px solid red;
      background: none;
      box-sizing: border-box;
      z-index: 10;
    }
    .top-buttons .zombie-icon {
      background-image: url('zombieface.png');
      background-size: 50px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      width: 50px;
      height: 50px;
      transform: translateY(-35px) translateX(5px);
      position: relative;
      outline: 2px solid red;
      z-index: 11;
    }
    .top-buttons .crown-icon {
      background-image: url('redcrown.png');
      background-size: 50px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      width: 50px;
      height: 50px;
      transform: translateY(-35px) translateX(5px);
      position: relative;
      outline: 2px solid red;
      font-size: 30px;
      font-weight: bold;
      color: white;
      text-shadow: -3px -3px 0 black, 3px -3px 0 black, -3px 3px 0 black, 3px 3px 0 black, -3px 0px 0 black, 3px 0px 0 black, 0px 3px 0 black, 0px -3px 0 black;
    }

    .top-buttons .save-icon {
      background-image: url('book.png');
      background-size: 50px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      width: 50px;
      height: 50px;
      transform: translateY(-35px) translateX(5px);
      position: relative;
      outline: 2px solid red;
      z-index: 11;
    }

    .counters {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
      font-weight: bold;
      font-size: 60px;
      outline: 2px solid red;
      z-index: 5;
    }
    .counter {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: bold;
      font-size: 60px;
      outline: 2px solid red;
    }
    .counter span {
      font-size: 24px;
      width: 160px;
      text-align: right;
      outline: 2px solid red;
    }
    .value {
      font-size: 24px;
      min-width: 40px;
      text-align: center;
      font-weight: bold;
      font-size: 60px;
      outline: 2px solid red;
    }
    .btn {
      margin: 0 5px;
      cursor: pointer;
      border-radius: 15px;
      border-width: 5px;
      border: 5px solid black;
      width: 70px;
      height: 70px;
    }
    .reset-death-container {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      font-weight: bold;
      outline: 2px solid red;
      z-index: 3;
    }
    
    .reset-death-container.show {
      opacity: 1;
      transform: translateX(400px) translateY(0px);
      animation: deathShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes deathShow {
      to {
        opacity: 1;
        transform: translateX(0px) translateY(0px);
      }
    }

    .reset-death-container.show2 {
      opacity: 1;
      transform: translateX(0px) translateY(0px);
      animation: deathHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes deathHide {
      to {
        opacity: 1;
        transform: translateX(400px) translateY(0px);
      }
    }
    
    .reset-death-container button {
      font-size: 30px;
      padding: 5px 15px;
      font-weight: bold;
      border: 5px solid black;
      border-radius: 25px;
      border-width: 5px;
      outline: 2px solid blue;
    }

    .bron-plus {
      background-image: url('bron.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(77, 77, 77);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .bron-minus {
      background-image: url('niebron.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(77, 77, 77);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .glod-plus {
      background-image: url('glod.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(172, 126, 0);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .glod-minus {
      background-image: url('nieglod.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(172, 126, 0);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .zycie-plus {
      background-image: url('zycie.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: red;                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .zycie-minus {
      background-image: url('niezycie.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: red;                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .doswiadczenie-plus {
      background-image: url('doswiadczenie.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(1, 168, 37);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .doswiadczenie-minus {
      background-image: url('niedoswiadczenie.png');
      background-size: 67px;        /* Dopasuj do rozmiaru przycisku */
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgb(1, 168, 37);                  /* Zmiana koloru tekstu je≈õli obrazek ciemny */
      font-weight: bold;
    }

    .plus-text {
      font-size: 70px !important;
      /* font-weight: bold; */
      transform: translateY(-100px);
      text-shadow: -3px -3px 0 black, 3px -3px 0 black, -3px 3px 0 black, 3px 3px 0 black, -3px 0px 0 black, 3px 0px 0 black, 0px 3px 0 black, 0px -3px 0 black;
      color: white;
      position: relative;
      top: -10px;
    }

    .black { color: black; }
    .green { color: rgb(172, 126, 0); }
    .red { color: red; }
    .blue { color: rgb(1, 168, 37); }
    .black-btn { background-color: black; color: white; }
    .green-btn { background-color: rgb(139, 102, 0); color: white; }
    .red-btn { background-color: red; color: white; }
    .blue-btn { background-color: rgb(1, 168, 37); color: white; }
    #message {
      margin-top: 20px;
      font-size: 18px;
      text-align: center;
    }
    #bonus-section {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-top: 20px;
      max-width: 330px;
      transform: translateY(40px) translateX(-125px);
      position: absolute;
      outline: 2px solid blue;
    }
    .bonus-instruction {
      text-align: left;
      margin-bottom: 10px;
      font-weight: bold;
      transform: translateX(400px) translateY(-20px);
      position: absolute;
      width: 300px;
      outline: 2px solid red;
    }

    .bonus-instruction.show {
      opacity: 1;
      transform: translateX(400px) translateY(-20px);
      animation: instrShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes instrShow {
      to {
        opacity: 1;
        transform: translateX(0px) translateY(-20px);
      }
    }

    .bonus-instruction.show2 {
      opacity: 1;
      transform: translateX(0px) translateY(-20px);
      animation: instrHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes instrHide {
      to {
        opacity: 1;
        transform: translateX(400px) translateY(-20px);
      }
    }


    a {
      color: blue;
      text-decoration: underline;
      transform: translateY(115px) translateX(-460px);
      font-size: 45px;
      font-weight: bold;
      width: 2000px;
      height: 60px;
      outline: 2px solid red;
      text-align: center;
    }

    .code-input {
      transform: translateY(115px) translateX(400px);
      position: absolute;
      width: 315px;
      height: 50px;
      font-size: 33px;
      font-weight: bold;
      opacity: 1;
      display: flex;
      visibility: visible;
      border: 2px solid #ccc;
      border-radius: 5px;
      outline: none;
      background-color: #f9f9f9;
      transition: all 0.3 ease;
    }

    .code-input:focus {
      border-color: #007bff;
      background-color: #fff;
    }

    .code-input.show {
      opacity: 1;
      transform: translateX(400px) translateY(115px);
      animation: inputShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes inputShow {
      to {
        opacity: 1;
        transform: translateX(0px) translateY(115px);
      }
    }

    .code-input.show2 {
      opacity: 1;
      transform: translateX(0px) translateY(115px);
      animation: inputHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes inputHide {
      to {
        opacity: 1;
        transform: translateX(400px) translateY(115px);
      }
    }

    .code-output {
      transform: translateY(180px);
      position: absolute;
      width: 900px;
      height: 450px;
      font-size: 25px;
      opacity: 1;
      display: flex;
      visibility: visible;
      outline: 2px solid blue;
      z-index: 1;
    }

    .code-output.show {
      opacity: 1;
      transform: translateX(400px) translateY(180px);
      animation: outputShow 1.5s cubic-bezier(0.1, 0.7, 0.1, 1) forwards;
    }

    @keyframes outputShow {
      to {
        opacity: 1;
        transform: translateX(0px) translateY(180px);
      }
    }

    .code-output.show2 {
      opacity: 1;
      transform: translateX(0px) translateY(180px);
      animation: outputHide 1.5s cubic-bezier(0.7, 0.1, 1, 0.1) forwards;
    }

    @keyframes outputHide {
      to {
        opacity: 1;
        transform: translateX(400px) translateY(180px);
      }
    }
  </style>
  <script>
    
    let count = 0;
    let countEvent = 0;
    let chanceGood = 0;
    let showBonus = false;
    let muted = true;
    let pauseTime = 0; // Zmienna przechowujƒÖca czas zatrzymania d≈∫wiƒôku
    const sound = new Audio('sound.mp3');
    const click = new Audio('click.mp3');
    click.load();
    click.preload = 'auto';
    click.autoplay = true;
    click.volume = 0.8;
    sound.loop = true; // opcjonalnie ‚Äì je≈õli chcesz pƒôtlƒô
    const zombieSound = new Audio(`zombie${Math.floor(Math.random() * 15) + 1}.mp3`);
    zombieSound.load();
    zombieSound.preload = 'auto';
    zombieSound.autoplay = true;
    let vol = 1;
    zombieSound.volume = vol;
    let zombieDiv = document.createElement('div');
    let buttonFirstDiv = document.createElement('div');
    let buttonSecondDiv = document.createElement('div');
    let buttonThirdDiv = document.createElement('div');
    let buttonEventDiv = document.createElement('div');
    let codeInputDiv = document.createElement('div');
    let codeOutputDiv = document.createElement('div');
    zombieDiv.classList.add('zombie');
    buttonFirstDiv.classList.add('zombie-button-first');
    buttonSecondDiv.classList.add('zombie-button-second');
    buttonThirdDiv.classList.add('zombie-button-third');
    buttonEventDiv.classList.add('buttonEvent');
    codeInputDiv.classList.add('code-input');
    codeInputDiv.id = 'codeInputDiv';
    codeOutputDiv.id = 'codeOutputDiv';
    codeOutputDiv.classList.add('code-output');
    //codeOutputDiv.style.display = flex;
    //codeOutputDiv.style.visibility = visible;
    codeOutputDiv.style.opacity = 1;
    //odeInputDiv.style.display = flex;
    //codeInputDiv.style.visibility = visible;
    codeInputDiv.style.opacity = 1;
    //document.body.appendChild(codeInputDiv);
    //document.body.appendChild(codeOutputDiv);
    const code = codeInputDiv.textContent;
    let zombieImages = ['zombie1.png', 'zombie2.png', 'zombie3.png', 'zombie4.png', 'zombie5.png', 'zombie6.png'];
    //existingButtonEvent.style.opacity = 0;
    //let existingButtonEvent = document.querySelector('.buttonEvent');
    //document.body.appendChild(zombieDiv);

    function playRandomZombieSound() {
      // Tworzymy nowy obiekt Audio
      const zombieSound = new Audio(`zombie${Math.floor(Math.random() * 15) + 1}.mp3`);

      zombieSound.load();
      zombieSound.preload = 'auto';
      zombieSound.autoplay = true;
      zombieSound.volume = vol;
     
      // Odtwarzamy d≈∫wiƒôk
      zombieSound.play();
    } 

    function toggleFilmMode() {
      showBonus = !showBonus;
      click.currentTime = 0;
      click.play();

      /*let codeInputDiv = document.createElement('div');
      codeInputDiv.classList.add('code-input');
      document.body.appendChild(codeInputDiv);
      codeInputDiv.id = 'codeInputDiv2';*/

      //const codeInput = document.querySelector('.code-input');

      document.querySelector('h1').classList.remove('icon-slide-down');
      document.querySelector('h1').classList.add('icon-slide-down2');

      setTimeout(() => {
          document.getElementById('main-title').textContent = showBonus ? 'Bonusowy film:' : 'Liczniki punkt√≥w:';
          document.querySelector('h1').classList.remove('icon-slide-down2');
          document.querySelector('h1').classList.add('icon-slide-down');
        }, 1500)


      if (showBonus === true) {
        document.querySelector('.counters').classList.remove('icon-slide-left');
        document.querySelector('.counters').classList.add('icon-slide-left2');

        document.querySelector('.reset-death-container').classList.remove('show');
        document.querySelector('.reset-death-container').classList.add('show2');
        setTimeout(() => {
          /*codeInputDiv.classList.remove('show2');
          codeInputDiv.classList.add('show');*/
          document.querySelector('.code-input').classList.remove('show2');
          document.querySelector('.code-input').classList.add('show');

          document.querySelector('.code-output').classList.remove('show2');
          document.querySelector('.code-output').classList.add('show');

          document.querySelector('.bonus-instruction').classList.remove('show2');
          document.querySelector('.bonus-instruction').classList.add('show');
        }, 1500)
      } else {

        /*codeInputDiv.classList.remove('show');
        codeInputDiv.classList.add('show2');*/
        
        document.querySelector('.code-input').classList.remove('show');
        document.querySelector('.code-input').classList.add('show2');

        document.querySelector('.code-output').classList.remove('show');
        document.querySelector('.code-output').classList.add('show2');

        document.querySelector('.bonus-instruction').classList.remove('show');
        document.querySelector('.bonus-instruction').classList.add('show2');

        setTimeout(() => {
          document.querySelector('.counters').classList.remove('icon-slide-left2');
          document.querySelector('.counters').classList.add('icon-slide-left');

          document.querySelector('.reset-death-container').classList.remove('show2');
          document.querySelector('.reset-death-container').classList.add('show');
        }, 1500)
      }


      //document.getElementById('main-title').textContent = showBonus ? 'Bonusowy film:' : 'Liczniki punkt√≥w:';
      //document.getElementById('bonus-section').style.display = showBonus ? 'flex' : 'none';
      //document.getElementById('counters').style.display = showBonus ? 'none' : 'flex';
      //document.querySelector('.reset-death-container').style.display = showBonus ? 'none' : 'flex';
      document.getElementById('death-message').style.display = 'none';
    }

    function toggleMute(btn) {
      muted = !muted;
      click.currentTime = 0;
      click.play();
      btn.textContent = muted ? 'üîá' : 'üîä';

      if (muted) {
        sound.pause();
        pauseTime = sound.currentTime;
        //sound.currentTime = 0; // zatrzymuje d≈∫wiƒôk natychmiast
      } else {
        sound.currentTime = pauseTime;
        sound.play();
      }
    }

    function changeZombieSkin() {
      playRandomZombieSound();
      zombieShake();
      setTimeout(() => {
        let zombieImages = ['zombie1.png', 'zombie2.png', 'zombie3.png', 'zombie4.png', 'zombie5.png', 'zombie6.png'];
        let randomImage = zombieImages[Math.floor(Math.random() * zombieImages.length)];
        zombieDiv.style.backgroundImage = `url('${randomImage}')`;
      }, 1100);
    }


    function toggleZombieMode() {
      count++;
      click.currentTime = 0;
      click.play();

      if (count % 2 === 1) {
        console.log(1);
        
        let zombieImages = ['zombie1.png', 'zombie2.png', 'zombie3.png', 'zombie4.png', 'zombie5.png', 'zombie6.png'];
        let randomImage = zombieImages[Math.floor(Math.random() * zombieImages.length)];
        
        zombieDiv.style.backgroundImage = `url('${randomImage}')`;
        
        document.body.appendChild(zombieDiv);
        document.body.appendChild(buttonFirstDiv);
        document.body.appendChild(buttonSecondDiv);
        document.body.appendChild(buttonThirdDiv);
        //document.body.appendChild(buttonEventDiv);

        zombieDiv.style.bottom = '-45px';
        zombieDiv.style.right = '-290px';

        zombieDiv.classList.remove('hide');
        zombieDiv.classList.add('show');

        buttonFirstDiv.classList.remove('hide');
        buttonFirstDiv.classList.add('show');

        buttonSecondDiv.classList.remove('hide');
        buttonSecondDiv.classList.add('show');

        buttonThirdDiv.classList.remove('hide');
        buttonThirdDiv.classList.add('show');

        addRandomTextToButton();

        zombieDiv.addEventListener('click', changeZombieSkin);
        const buttons = document.querySelectorAll('.zombie-button-first, .zombie-button-second, .zombie-button-third');

        buttons.forEach(button => {
          button.addEventListener('click', randomText);
        });
      } else {
        console.log(0);
        //po drugim w≈ÇƒÖczeniu - wy≈ÇƒÖczenie
        let existingButtonEvent = document.querySelector('.buttonEvent');
        zombieDiv.removeEventListener('click', changeZombieSkin);
        if (countEvent % 2 === 1) {
          existingButtonEvent.classList.remove('show');
          existingButtonEvent.classList.add('hide');
          countEvent++;
          console.log(countEvent);
          console.log('1 miejsce');
          existingButtonEvent.removeEventListener('click', buttonListener);
          setTimeout(() => {
            existingButtonEvent.style.opacity = 0;
            existingButtonEvent.remove();
          }, 2100)
        }

        const buttons = document.querySelectorAll('.zombie-button-first, .zombie-button-second, .zombie-button-third');

        buttons.forEach(button => {
          button.removeEventListener('click', randomText);
        });

        zombieDiv.style.bottom = '-45px';
        zombieDiv.style.right = '-40px';

        zombieDiv.classList.remove('show');
        zombieDiv.classList.add('hide');

        buttonFirstDiv.classList.remove('show');
        buttonFirstDiv.classList.add('hide');

        buttonSecondDiv.classList.remove('show');
        buttonSecondDiv.classList.add('hide');

        buttonThirdDiv.classList.remove('show');
        buttonThirdDiv.classList.add('hide');

        setTimeout(() => {
          zombieDiv.remove();
          buttonFirstDiv.remove();
          buttonSecondDiv.remove();
          buttonThirdDiv.remove();
        }, 2100);
      }
    }

    function randomText() {
      playRandomZombieSound();
      click.currentTime = 0;
      click.play();
      const chance = Math.random(); // losowa liczba od 0 do 1
      if (chance < 0.5) {
        // Nic siƒô nie dzieje (50% szans)
        zombieShake();
      } else {
        zombieShake();
        setTimeout(() => {
          zombieEvent(); // wywo≈Çanie funkcji event()
        }, 420)
      }
    }

    function zombieShake() {
      //const zombie = document.querySelector('.zombie');
      console.log('zombieShake start');
      //if (!zombie) return;

      let intensity = 1;
      let growing = true;

      const shakeInterval = setInterval(() => {
        // Wygeneruj losowe przesuniƒôcia
        const x = (Math.random() - 0.5) * intensity * 2 - 40;
        const y = (Math.random() - 0.5) * intensity - 45;

        zombieDiv.classList.remove('show');
        zombieDiv.style.right = `${x}px`;
        zombieDiv.style.bottom = `${y}px`;

        //zombie.style.transform = `translateX(${x}px)`;
        //zombie.style.transform = `translateY(${y}px)`;
      
        // Zwiƒôksz lub zmniejsz intensywno≈õƒá
        if (growing) {
          intensity += 0.5;
          if (intensity >= 12) growing = false; // osiƒÖgnƒôli≈õmy maksimum
        } else {
          intensity -= 0.5;
          if (intensity <= 0) {
            clearInterval(shakeInterval);
            //zombie.style.transform = 'translate(0, 0)'; // wr√≥ƒá do pozycji
            zombieDiv.style.bottom = '-45px';
            zombieDiv.style.right = '-40px';
            console.log('zombieShake done');
          }
        }
      }, 50);
    }

    function zombieEvent() {
      const buttons = document.querySelectorAll('.zombie-button-first, .zombie-button-second, .zombie-button-third');

        buttons.forEach(button => {
          button.removeEventListener('click', randomText);
        });
      countEvent++;
      console.log(countEvent);
      console.log('2 miejsce');

      document.body.appendChild(buttonEventDiv);

      let existingButtonFirst = document.querySelector('.zombie-button-first');
      let existingButtonSecond = document.querySelector('.zombie-button-second');
      let existingButtonThird = document.querySelector('.zombie-button-third');
      let existingButtonEvent = document.querySelector('.buttonEvent');
      existingButtonEvent.style.opacity = 0;
      
      /* let buttonEventDiv = document.createElement('.buttonEvent');
      buttonEventDiv.classList.add('buttonEvent');
      document.body.appendChild(buttonEventDiv);
      void buttonEventDiv.offsetWidth;
      buttonEventDiv.classList.add('show'); */
      
      existingButtonFirst.classList.remove('show');
      existingButtonFirst.classList.add('hide');

      existingButtonSecond.classList.remove('show');
      existingButtonSecond.classList.add('hide');

      existingButtonThird.classList.remove('show');
      existingButtonThird.classList.add('hide');

      setTimeout(() => {
        existingButtonEvent.style.opacity = 1;
      }, 1800)
      existingButtonEvent.classList.remove('hide');
      existingButtonEvent.classList.add('show');

    

      const possibleTextsEventGood = ['dobry1', 'dobry2', 'dobry3', 'dobry4'];
      const possibleTextsEventBad = ['z≈Çy1', 'z≈Çy2', 'z≈Çy3', 'z≈Çy4'];

      const chance = Math.random();
      //const code = codeInputDiv.value;

      /*codeInputDiv.addEventListener('input', function() {
        const code = codeInputDiv.value;  // Pobieramy warto≈õƒá z input
        //codeInputDiv.textContent = code;  // Wy≈õwietlamy warto≈õƒá w div
        console.log(code);
      });*/

      if(chance < chanceGood) {
        let indexEvent = Math.floor(Math.random() * possibleTextsEventGood.length);
        existingButtonEvent.textContent = possibleTextsEventGood[indexEvent]
      } else {
        let indexEvent = Math.floor(Math.random() * possibleTextsEventBad.length);
        existingButtonEvent.textContent = possibleTextsEventBad[indexEvent]
      }

      existingButtonEvent.addEventListener('click', buttonListener, {once: true});
    }

    function buttonListener() {
      click.currentTime = 0;
      click.play();
      let existingButtonEvent = document.querySelector('.buttonEvent');
      let existingButtonFirst = document.querySelector('.zombie-button-first');
      let existingButtonSecond = document.querySelector('.zombie-button-second');
      let existingButtonThird = document.querySelector('.zombie-button-third');

      const buttons = document.querySelectorAll('.zombie-button-first, .zombie-button-second, .zombie-button-third');

        buttons.forEach(button => {
          button.addEventListener('click', randomText);
        });
      countEvent++;
      console.log(countEvent);
      console.log('3 miejsce');
      existingButtonEvent.classList.remove('show');
      existingButtonEvent.classList.add('hide');
      
      setTimeout(() => {
        existingButtonEvent.style.opacity = 0;
        existingButtonEvent.remove();
      }, 1800)

      setTimeout(() => {
        existingButtonFirst.classList.remove('hide');
        existingButtonFirst.classList.add('show');
        existingButtonSecond.classList.remove('hide');
        existingButtonSecond.classList.add('show');
        existingButtonThird.classList.remove('hide');
        existingButtonThird.classList.add('show');
      }, 1800);
    }


    function addRandomTextToButton() {
      // Tablica z napisami, kt√≥re bƒôdƒÖ losowane
      const possibleTexts = [
      'Dokonanie 2 r√≥≈ºnych wymian w sklepie.', 'Wyj≈õcie ze strefy.', 'Wej≈õcie do strefy.', 'Wej≈õcie na zu≈ºyte pole regeneracji.', 'Odkrycie nowego kafelka.', 
      'Przej≈õcie drogƒÖ za ponad 2 punkty g≈Çodu.', '≈ömierƒá gracza.', 'Przej≈õcie jednokierunkowƒÖ drogƒÖ.', 'Wyrzucenie 6 podczas z≈Çotego losowania.',
      'Strata ponad 2 punkt√≥w ≈ºycia w 1 turze.'];
    
      const usedIndices = new Set();

      // Funkcja pomocnicza do losowania unikalnego indeksu
      function getUniqueIndex() {
        let index;
        do {
          index = Math.floor(Math.random() * possibleTexts.length);
        } while (usedIndices.has(index));
        usedIndices.add(index);
        return index;
      }
    
      const randomIndex1 = getUniqueIndex();
      const randomIndex2 = getUniqueIndex();
      const randomIndex3 = getUniqueIndex();
    
      // Ustawianie tekst√≥w np. do 3 r√≥≈ºnych przycisk√≥w (je≈õli masz)
      const button1 = document.querySelector('.zombie-button-first');
      const button2 = document.querySelector('.zombie-button-second');
      const button3 = document.querySelector('.zombie-button-third');
    
      if (button1) button1.textContent = possibleTexts[randomIndex1];
      if (button2) button2.textContent = possibleTexts[randomIndex2];
      if (button3) button3.textContent = possibleTexts[randomIndex3];
    }


    function updateValue(id, delta, min, max) {
      const valueElem = document.getElementById(id);
      let value = parseInt(valueElem.textContent);
      value = Math.max(min, Math.min(max, value + delta));
      valueElem.textContent = value;
      storageCheck();
      click.currentTime = 0;
      click.play();
    }

    function storageCheck() {
      if(localStorage.getItem('bro') == document.getElementById('bron').textContent && localStorage.getItem('glo') == document.getElementById('glod').textContent && localStorage.getItem('zyc') == document.getElementById('zycie').textContent && localStorage.getItem('dos') == document.getElementById('doswiadczenie').textContent && localStorage.getItem('zwy') == document.getElementById('zwyciestwo').textContent) {
        //poka≈º book.png
        document.querySelector('.save-icon').style.backgroundImage = `url('book.png')`;
        console.log('wartosci rowne zapisanym');
      } else {
        //poka≈º book2.png
        document.querySelector('.save-icon').style.backgroundImage = `url('book2.png')`;
        console.log('wartosci rozne zapisanym');
      }
    }

    function resetValues() {
      document.getElementById('bron').textContent = 1;
      document.getElementById('glod').textContent = 10;
      document.getElementById('zycie').textContent = 10;
      document.getElementById('doswiadczenie').textContent = 0;
      document.querySelector('.crown-icon').textContent = 3;
      storageCheck();
      click.currentTime = 0;
      click.play();
    }

    function smierc() {
      const getRandom = () => Math.floor(Math.random() * 5 + 1) * 2;
      document.getElementById('glod').textContent = getRandom();
      document.getElementById('zycie').textContent = getRandom();
      document.getElementById('doswiadczenie').textContent = getRandom();
      updateValue('zwyciestwo', -1, 0, 99)
      click.currentTime = 0;
      click.play();

      const msg = document.getElementById('death-message');
      let seconds = 10;

      msg.style.display = 'block';
      msg.style.transform = 'translateY(-50px)';
      msg.textContent = 'Ustaw punkty broni na numer ostatnio dodanego kafelka planszy. (ten napis zniknie za 10)';
      
      const interval = setInterval(() => {
        seconds--;
        if (seconds > 0) {
          msg.textContent = `Ustaw punkty broni na numer ostatnio dodanego kafelka planszy. (ten napis zniknie za ${seconds})`;
        } else {
          msg.style.display = 'none';
          clearInterval(interval);
        }
      }, 1000);
    }

    function save() {
      console.log(Number(document.getElementById('bron').textContent));
      console.log(Number(document.getElementById('glod').textContent));
      console.log(Number(document.getElementById('zycie').textContent));
      console.log(Number(document.getElementById('doswiadczenie').textContent));
      console.log(Number(document.getElementById('zwyciestwo').textContent));

      localStorage.setItem('bro', document.getElementById('bron').textContent);
      localStorage.setItem('glo', document.getElementById('glod').textContent);
      localStorage.setItem('zyc', document.getElementById('zycie').textContent);
      localStorage.setItem('dos', document.getElementById('doswiadczenie').textContent);
      localStorage.setItem('zwy', document.getElementById('zwyciestwo').textContent);
      console.log(localStorage.getItem('bro'));
      console.log(localStorage.getItem('glo'));
      console.log(localStorage.getItem('zyc'));
      console.log(localStorage.getItem('dos'));
      console.log(localStorage.getItem('zwy'));
      storageCheck();
      click.currentTime = 0;
      click.play();
    }

    function checkCode() {
      const codeInputDiv = document.querySelector('.code-input')
      const output = document.getElementById('codeOutputDiv');
      
      const code = codeInputDiv.value;  // Pobieramy warto≈õƒá z input
      //codeInputDiv.textContent = code;  // Wy≈õwietlamy warto≈õƒá w div
      console.log(code);
      if (code === 'abc') {
        output.innerHTML = 'Gratulacje! Wpisany przez Ciebie kod jest prawid≈Çowy! Dziƒôki za po≈õwiƒôcony czas, oto obiecany bonusowy film: <a href="https://www.youtube.com/watch?v=SgQPw00wURw" target="_blank">KLIKNIJ TUTAJ</a>';
      } else {
        if (code === 'BL') {
          chanceGood = 1;
          console.log(chanceGood);
        } else {
          chanceGood = 0;
          console.log(chanceGood);
          if (code === 'blue') {
            document.querySelector('.crown-icon').style.backgroundImage = `url('bluecrown.png')`;
          } else {
            document.querySelector('.crown-icon').style.backgroundImage = `url('redcrown.png')`;
            if (code === 'noclicksound') {
              click.volume = 0;
            } else {
              click.volume = 0.8;
              if (code === 'nozombiesound') {
                vol = 0;
              } else {
                vol = 1;
              }
            }
          }
        }
        output.textContent = 'Nieprawid≈Çowy kod';
      }
    }

    function rollDice(btn) {
      let rolls = 15;
      let baseDelay = 50;
      click.currentTime = 0;
      click.play();

      for (let i = 0; i < rolls; i++) {
      // Ka≈ºde kolejne op√≥≈∫nienie bƒôdzie wiƒôksze (np. kwadratowo)
      let delay = baseDelay * i * (i / 3 + 1);

      setTimeout(() => {
        const roll = Math.floor(Math.random() * 6) + 1;
        btn.textContent = diceUnicode(roll);
      }, delay);
    }
  }

    function diceUnicode(n) {
      return ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'][n - 1];
    }

    document.addEventListener('DOMContentLoaded', () => {
      const diceBtn = document.getElementById('dice-btn');
      diceBtn.textContent = diceUnicode(Math.floor(Math.random() * 6) + 1);
      console.log('odswiezenie');
      

      setTimeout(() => {

        if (localStorage.getItem('bro') === null) {
          // Przypisanie domy≈õlnych warto≈õci do localStorage za pierwszym za≈Çadowaniem
          localStorage.setItem('bro', '1');
          localStorage.setItem('glo', '10');
          localStorage.setItem('zyc', '10');
          localStorage.setItem('dos', '0');
          localStorage.setItem('zwy', '3');
        }

        document.getElementById('bron').textContent = localStorage.getItem('bro');
        document.getElementById('glod').textContent = localStorage.getItem('glo');
        document.getElementById('zycie').textContent = localStorage.getItem('zyc');
        document.getElementById('doswiadczenie').textContent = localStorage.getItem('dos');
        document.getElementById('zwyciestwo').textContent = localStorage.getItem('zwy');

        console.log(localStorage.getItem('bro'));
        console.log(localStorage.getItem('glo'));
        console.log(localStorage.getItem('zyc'));
        console.log(localStorage.getItem('dos'));
        console.log(localStorage.getItem('zwy'));

        localStorage.setItem('test', '123');
        console.log(localStorage.getItem('test'));
      }, 100);
    });
  </script>
</head>
<body>
  <div class="top-buttons icon-slide-right">
    <button onclick="toggleFilmMode()">üé¨</button>
    <button onclick="toggleMute(this)">üîá</button>
    <button id="dice-btn" class="dice-icon" onclick="rollDice(this)">‚öÄ</button>
    <button class="zombie-icon" onclick="toggleZombieMode()"></button>
    <button class="crown-icon" id="zwyciestwo" onclick="updateValue('zwyciestwo', 1, 0, 99)"></button>
    <button class="save-icon" onclick="save()"></button>
  </div>

  <h1 id="main-title" class="icon-slide-down">Liczniki punkt√≥w:</h1>

  <div id="counters" class="counters icon-slide-left">
    <div class="counter">
      <span class="black">Bro≈Ñ</span>
      <button class="btn bron-minus" onclick="updateValue('bron', -1, 0, 20)"><span class="plus-text">-</span></button>
      <div id="bron" class="value black"></div>
      <button class="btn bron-plus" onclick="updateValue('bron', 1, 0, 20)"><span class="plus-text">+</span></button>
    </div>
    <div class="counter">
      <span class="green">G≈Ç√≥d</span>
      <button class="btn glod-minus" onclick="updateValue('glod', -1, 0, 10)"><span class="plus-text">-</span></button>
      <div id="glod" class="value green"></div>
      <button class="btn glod-plus" onclick="updateValue('glod', 1, 0, 10)"><span class="plus-text">+</span></button>
    </div>
    <div class="counter">
      <span class="red">≈ªycie</span>
      <button class="btn zycie-minus" onclick="updateValue('zycie', -1, 0, 10)"><span class="plus-text">-</span></button>
      <div id="zycie" class="value red"></div>
      <button class="btn zycie-plus" onclick="updateValue('zycie', 1, 0, 10)"><span class="plus-text">+</span></button>
    </div>
    <div class="counter">
      <span class="blue">Do≈õwiadczenie</span>
      <button class="btn doswiadczenie-minus" onclick="updateValue('doswiadczenie', -1, 0, 20)"><span class="plus-text">-</span></button>
      <div id="doswiadczenie" class="value blue"></div>
      <button class="btn doswiadczenie-plus" onclick="updateValue('doswiadczenie', 1, 0, 20)"><span class="plus-text">+</span></button>
    </div>
  </div>

  <div id="death-message" style="display:none; color: #444; font-size: 16px; margin-top: 10px;"></div>

  <div class="reset-death-container">
    <button class="reset-death-container icon-slide-right-resetuj" onclick="resetValues()">Resetuj</button>
    <button class="reset-death-container icon-slide-left-smierc" onclick="smierc()">≈ömierƒá</button>
  </div>

  <div id="bonus-section">
    <div class="bonus-instruction">
      Je≈õli chcesz obejrzeƒá bonusowy film:<br>
      1. Ustaw wszystkie kafelki planszy jeden na drugim (pierwszy kafelek na dole, ostatni na g√≥rze)<br>
      2. Odwr√≥ƒá ca≈Çy stos do g√≥ry nogami<br>
      3. Wpisuj litery kt√≥re widzisz po kolei.<br>
      4. Obejrzyj bonusowy film!
    </div>
    <input type="text" id="codeInputDiv2" class="code-input" contenteditable="true" oninput="checkCode()" placeholder="Tu wpisz kod..." />
    <div id="codeOutputDiv" class="code-output"></div>
  </div>
</body>
</html>
